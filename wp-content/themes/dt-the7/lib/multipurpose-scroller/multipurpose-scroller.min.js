!function(e){"use strict";let t=function(t,r){let s,l,o,n,c,i,a,f={},d={left:0,x:0,dx:0,dxLast:0,time:0,lastTime:0},u=!0,h=0,m=0,g=0,$=0,p=0,w={arrowScrollMode:"single",updateFocus:!1,dragThreshold:3,preventClickAfterDrag:!0,classes:{inFocus:"nsInFocus",grab:"nsGrab",active:"active",lazyLoad:"nsLazyLoad",disabled:"nsDisabled",noScroll:"nsNoScroll"},elements:{arrowLeft:".nsLeftArrow",arrowRight:".nsRightArrow",scroller:".nsContent",scrollerElements:".nsItem",progressTrack:".nsProgressTrack",progressIndicator:".nsProgressIndicator"}},v=function(){s=e(t),f.$leftArrow=s.find(l.elements.arrowLeft),f.$rightArrow=s.find(l.elements.arrowRight),f.$scroller=s.find(l.elements.scroller),f.$scrollerElements=l.elements.scrollerElements?s.find(l.elements.scrollerElements):f.$scroller.children(),f.$progressTrack=s.find(l.elements.progressTrack),f.$progressIndicator=s.find(l.elements.progressIndicator),f.$window=e(window)},L=function(t){l=e.extend(!0,w,t)},b=function(){f.$scroller.on("scroll",E),f.$leftArrow.on("click",j),f.$rightArrow.on("click",j),f.$scroller.on("mousedown",F),l.preventClickAfterDrag&&f.$scroller[0].addEventListener("click",S,!0),f.$scroller.on("wheel",P),f.$scroller.on("touchstart",R),f.$window.on("resize",V),f.$window.on("the7-resize-width-debounce",Q)},y=function(e,t,r){var s;return function(){var l=this,o=arguments,n=r&&!s;clearTimeout(s),s=setTimeout((function(){s=null,r||e.apply(l,o)}),t),n&&e.apply(l,o)}},E=function(){clearTimeout(a),a=setTimeout((function(){a=null,x(),G()}),50),N()},A=function(){"undefined"!=typeof Layzr&&(c=new Layzr({selector:"."+l.classes.lazyLoad,attr:"data-src",attrSrcSet:"data-srcset",retinaAttr:"data-src-retina",hiddenAttr:"data-src-hidden",threshold:30,callback:function(){var t=e(this);t.hasClass("is-loaded")||setTimeout((function(){t.parent().removeClass("layzr-bg")}),350)}}))},T=function(){l=e.extend(!0,w,r),c&&(o=new IntersectionObserver((t=>{t.forEach((t=>{let r=e(t.target);if(t.isIntersecting){let e=r.find("img.lazy-scroll");e.length&&(e.addClass(l.classes.lazyLoad),c.updateSelector(),c.update()),o.unobserve(t.target)}}))}),{root:f.$scroller[0],threshold:0,rootMargin:"100% 100% 100% 100%"})),n=new IntersectionObserver((t=>{t.forEach((t=>{let r=e(t.target);t.isIntersecting?(r.addClass(l.classes.active),s.trigger("the7-ns:item-active",[r])):(r.removeClass(l.classes.active),s.trigger("the7-ns:item-not-active",[r]))}))}),{root:f.$scroller[0],threshold:0,rootMargin:"100% 0% 100% 0%"}),f.$scrollerElements.each((function(){o&&o.observe(this),n&&n.observe(this)}))},k=function(){o&&o.disconnect(),n&&n.disconnect()},x=function(){l.updateFocus&&(W(),M(p))},C=function(){const e=f.$scrollerElements.first()[0];return window.getComputedStyle(e,null).getPropertyValue("scroll-snap-align")},I=function(e){const t=f.$scrollerElements.first()[0],r=f.$scroller[0];let s=0;switch(e){case"center":s=r.offsetWidth/2;break;case"end":s=r.offsetWidth-t.offsetLeft;break;default:s=t.offsetLeft}return s},z=function(e,t){if(!e)return 0;let r=e.offsetLeft;switch(t){case"center":r+=e.offsetWidth/2;break;case"end":r+=e.offsetWidth}return r},W=function(){let e=f.$scrollerElements,t=C(),r=f.$scroller.scrollLeft()+I(t),s=1/0;for(let l=0;l<e.length;l++){let o=z(e[l],t),n=Math.abs(r-o);n<s&&(s=n,p=l)}},M=function(e){e<0||e>f.$scrollerElements.length-1||(f.$scrollerElements.removeClass(l.classes.inFocus),f.$scrollerElements.eq(e).addClass(l.classes.inFocus))},D=function(){const e=f.$scrollerElements,t=C();let r=I(t);const s=f.$scroller.scrollLeft()+r;for(let l=0;l<e.length;l++){const o=e[l],n=l>0?e[l-1]:null,c=l+1<e.length?e[l+1]:null;let i=z(o,t),a=z(n,t),f=z(c,t);const d=Math.round(i-s);if(d<-1)l<e.length-1?(m=l,$=i-r,h=l+1,g=f-r):l===e.length-1&&(m=l-1,$=a-r,h=l,g=i-r);else{if(!(d>=-1&&d<=1))break;0===l?(m=l,$=i-r,h=l+1,g=f-r):l>0&&l<e.length-1?(m=l-1,$=a-r,h=l+1,g=f-r):l===e.length-1&&(m=l-1,$=a-r,h=l,g=i-r)}}},F=function(e){if(u)return;e.preventDefault(),f.$scroller.addClass(l.classes.grab),f.$scroller.css("scroll-behavior","auto"),f.$scroller.css("scroll-snap-type","none");const t=Date.now();d={left:f.$scroller.scrollLeft(),x:e.clientX,dx:0,time:t,lastTime:t},cancelAnimationFrame(i),document.addEventListener("mousemove",q),document.addEventListener("mouseup",O,!1)},S=function(e){u||Math.abs(d.dx)>l.dragThreshold&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())},P=function(e){X()},R=function(e){X()},X=function(){cancelAnimationFrame(i),f.$scroller.css("scroll-snap-type",""),f.$scroller.css("scroll-behavior","")},q=function(e){if(u)return;e.preventDefault(),d.dxLast=d.dx,d.lastTime=d.time,d.time=Date.now(),d.dx=e.clientX-d.x;let t=d.left-d.dx;f.$scroller.scrollLeft(t)},O=function(e){if(f.$scroller.removeClass(l.classes.grab),u)return;if("none"===C()){const e=d.dxLast-d.dx,r=d.time-d.lastTime,s=16,l=Math.ceil(e/r*s),o=.85,n=1;let c=Math.abs(l);var t=function(){if(c>n){let e=f.$scroller.scrollLeft();l>0?e+=c:e-=c,f.$scroller.scrollLeft(e),c*=o,i=requestAnimationFrame(t)}else cancelAnimationFrame(i)};t()}else D(),f.$scroller.css("scroll-behavior",""),d.dx<0?f.$scroller.scrollLeft(g):d.dx>0&&f.$scroller.scrollLeft($);document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",O)},j=function(t){if(a)return;X(),D();const r=e(event.target).closest(f.$leftArrow).length;f.$scroller.scrollLeft(r?$:g)},B=function(e,t){e.toggleClass(l.classes.disabled,t)},G=function(){let e=f.$scroller[0],t=f.$leftArrow,r=f.$rightArrow,o=e.scrollWidth,n=e.offsetWidth,c=Math.round(e.scrollLeft);o>n?(s.toggleClass(l.classes.noScroll,!1),u=!1,e.style.cursor="grab",c<=0?(B(t,!0),B(r,!1)):o-c-n<=0?(B(t,!1),B(r,!0)):(B(t,!1),B(r,!1))):(s.toggleClass(l.classes.noScroll,!0),u=!0,e.style.cursor="auto")},N=function(){let e=f.$progressTrack,t=f.$progressIndicator,r=f.$scroller,s=(e.innerWidth()-t.outerWidth())/100,l=r[0].scrollWidth-r.innerWidth(),o=s*(l>0?r.scrollLeft()/l*100:0);t.css("--nsProgressBarTranslateX",`${o}px`)},Q=function(){G(),function(){let e=f.$scroller;f.$progressIndicator.css("width",e.innerWidth()/e[0].scrollWidth*100+"%")}(),N()},V=function(){Q()};this.update=function(){Q()},this.snapTo=function(e){if(e<0||e>f.$scrollerElements.length-1)return;const t=f.$scrollerElements[e];let r=C(),s=I(r),l=z(t,r);f.$scroller.scrollLeft(l-s)},this.destroy=function(){f.$scroller.off("scroll",E),f.$leftArrow.off("click",j),f.$rightArrow.off("click",j),f.$scroller.off("mousedown",F),l.preventClickAfterDrag&&f.$scroller[0].removeEventListener("click",S,!0),f.$scroller.off("wheel",P),f.$scroller.off("touchstart",R),f.$window.off("the7-resize-width-debounce",Q),clearTimeout(a),a=null,k()},function(e){L(e),v(),f.$scrollerElements.length&&(V=y(V,250),b(),Q(),x(),A(),T(),s.css("opacity",1))}(r)};e.fn.The7MultipurposeScroller=function(r){const s="the7-multipurpose-scroller";let l="string"==typeof r,o=Array.prototype.slice.call(arguments,1);return this.each((function(){let n=e(this);if(!l)return void n.data(s,new t(this,r));let c=n.data(s);if(!c)throw Error("Trying to perform the `"+r+"` method prior to initialization");if(!c[r])throw ReferenceError("Method `"+r+"` not found in instance");c[r].apply(c,o),"destroy"===r&&n.removeData(s)})),this}}(jQuery);