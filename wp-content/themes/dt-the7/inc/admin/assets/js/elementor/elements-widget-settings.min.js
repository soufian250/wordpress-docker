!function(e){e((function(){function t(e,t){return window.the7ElementorSettingsCache[e]||(window.the7ElementorSettingsCache[e]={}),void 0!==t?window.the7ElementorSettingsCache[e][t]:window.the7ElementorSettingsCache[e]}function n(e,t,n){window.the7ElementorSettingsCache[e]||(window.the7ElementorSettingsCache[e]={}),window.the7ElementorSettingsCache[e][t]=n}function i(e,n){var i=t(e,"terms"),o=[];return i[n]&&(o=i[n]),o}function o(e,n){var i=t(e,"taxonomies"),o=[];return i[n]&&(o=i[n]),o}function r(e,t,n){var i=window.Array.isArray(n)?n:[n];e.prop("disabled",!0),e.empty(),e.append(t.reduce((function(e,t,n){var o="";return-1!==i.indexOf(t.value)&&(o="selected"),e+'<option value="'+t.value+'"'+o+">"+t.label+"</option>"}),"")),e.prop("disabled",!1)}function a(e,t,n){var a=e.attributes.widgetType;r(t,i(a,e.getSetting("taxonomy")),e.getSetting("terms")),r(n,o(a,e.getSetting("post_type")),e.getSetting("taxonomy"))}function s(t,n){t.attributes.panel&&-1!==["content_section","query_section"].indexOf(t.attributes.panel.activeSection)&&setTimeout((function(t,n){var s=n.$el.find("[data-setting='post_type']"),l=n.$el.find("[data-setting='taxonomy']"),c=n.$el.find("[data-setting='terms']");a(t,c,l),s.on("change",(function(){var n=o(t.attributes.widgetType,e(this).val());n[0]&&(r(l,n,null),t.setSetting(n[0].value),l.trigger("change"))})),l.on("change",(function(){var n=t.attributes.widgetType;c[0].options.length=0,r(c,i(n,e(this).val()),null),t.setSetting("terms",[])}))}),350,this.model,this.panel)}void 0===window.the7ElementorSettingsCache&&(window.the7ElementorSettingsCache={}),elementor.hooks.addAction("panel/open_editor/widget",(function(l,c,d){const u=c.attributes.widgetType;if(!u||!u.startsWith("the7"))return;const p=c.attributes.settings.getControl("post_type");if(p){var g=l.$el.find("[data-setting='post_type']"),m=l.$el.find("[data-setting='taxonomy']"),h=l.$el.find("[data-setting='terms']");if(t(u,"taxonomies")&&t(u,"terms"))a(c,h,m);else{const t=p.options?Object.getOwnPropertyNames(p.options):[];e.post(window.the7ElementsWidget.ajaxurl,{action:"the7_elements_get_widget_taxonomies",post_types:t,_wpnonce:window.the7ElementsWidget._wpnonce}).done((function(e){e||(e={}),n(u,"taxonomies",e.taxonomies),n(u,"terms",e.terms),a(c,h,m)}))}g.on("change",(function(){var t=o(c.attributes.widgetType,e(this).val());t[0]&&(r(m,t,null),c.setSetting(t[0].value),m.trigger("change"))})),m.on("change",(function(){var t=c.attributes.widgetType;h[0].options.length=0,r(h,i(t,e(this).val()),null),c.setSetting("terms",[])})),elementor.channels.editor.off("change:editSettings",s).on("change:editSettings",s,{panel:l,model:c})}})),elementor.hooks.addAction("panel/open_editor/widget",(function(e,t,n){var i=t.attributes.widgetType;if(i&&i.startsWith("the7")){let t=e.$el.find("#elementor-panel-header-title");if(t.children("img, i.the7-widget").length)return;t.append('<i class="the7-widget"></i>')}})),elementor.on("preview:loaded",(function(){elementor.addControlView("the7-query",elementor.modules.controls.Select2.extend({cache:null,isTitlesReceived:!1,getSelect2Placeholder:function(){return{id:"",text:"All"}},getControlValueByName:function(e){var t=this.model.get("group_prefix")+e;return this.container.settings.get(t)},getQueryDataDeprecated:function(){return{filter_type:this.model.get("filter_type"),object_type:this.model.get("object_type"),include_type:this.model.get("include_type"),query:this.model.get("query")}},getQueryData:function(){var e=elementorCommon.helpers.cloneObject(this.model.get("autocomplete"));return _.isEmpty(e.query)&&(e.query={}),"cpt_tax"===e.object&&(e.object="tax",(_.isEmpty(e.query)||_.isEmpty(e.query.post_type))&&(e.query.post_type=this.getControlValueByName("post_type"))),{autocomplete:e}},getSelect2DefaultOptions:function(){var e=this;return jQuery.extend(elementor.modules.controls.Select2.prototype.getSelect2DefaultOptions.apply(this,arguments),{ajax:{transport:function(t,n,i){var o={},r="the7_panel_posts_control_filter_autocomplete";return!_.isEmpty(e.model.get("filter_type"))?(o=e.getQueryDataDeprecated(),r="the7_panel_posts_control_filter_autocomplete_deprecated"):o=e.getQueryData(),o.q=t.data.q,elementorCommon.ajax.addRequest(r,{data:o,success:n,error:i})},data:function(e){return{q:e.term,page:e.page}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:1})},getValueTitles:function(){var e=this,t={},n=!_.isEmpty(this.model.get("filter_type")),i=this.getControlValue(),o="the7_query_control_value_titles",r="autocomplete",a={};n?(r="filter_type",a=this.model.get(r).object,t.filter_type=a,t.object_type=e.model.get("object_type"),t.include_type=e.model.get("include_type"),t.unique_id=""+e.cid+a,o="the7_query_control_value_titles_deprecated"):(a=this.model.get(r).object,t.get_titles=e.getQueryData().autocomplete,t.unique_id=""+e.cid+a),i&&a&&(_.isArray(i)||(i=[i]),elementorCommon.ajax.loadObjects({action:o,ids:i,data:t,before:function(){e.addControlSpinner()},success:function(t){e.isTitlesReceived=!0,e.model.set("options",t),e.render()}}))},addControlSpinner:function(){this.ui.select.prop("disabled",!0),this.$el.find(".elementor-control-title").after('<span class="elementor-control-spinner">&nbsp;<i class="eicon-spinner eicon-animation-spin"></i>&nbsp;</span>')},onReady:function(){this.ui.select.select2(this.getSelect2Options()),this.isTitlesReceived||this.getValueTitles()}}))}))}))}(jQuery);